(this["webpackJsonp@School-managment-system"]=this["webpackJsonp@School-managment-system"]||[]).push([[111],{1706:function(e,t,s){"use strict";s.r(t);var r=s(9),a=s.n(r),n=s(16),c=s(1),o=s(26),i=s(22),l=s(132),d=s(181),u=s(501),j=s(575),b=s(576),h=s(500),p=s(573),m=s(502),x=s(238),f=s(58),O=s(108),w=s(561),g=s(568),v=s(572),y=s(31),C=s(64),S=s(120),k=s(36),P=s(0),R=function(){var e=Object(C.a)(),t=Object(o.i)(),s=t.id,r=t.token,i=(Object(y.a)().passwordReset,Object(o.g)(),Object(o.h)()),l=Object(c.useRef)([]);return Object(c.useEffect)((function(){l.current=l.current.slice(0,6)}),[]),Object(P.jsx)(O.c,{initialValues:{password:"",passwordConfirm:"",submit:null},validationSchema:f.f().shape({password:f.h().min(7,"Must be at least 7 characters").max(255).required("Required"),passwordConfirm:f.h().oneOf([f.g("password"),null],"Passwords must match").required("Required")}),onSubmit:function(){var t=Object(n.a)(a.a.mark((function t(n,c){var o,l,d,u,j;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.setErrors,l=c.setStatus,d=c.setSubmitting,t.prev=1,u=n.password,t.next=5,S.a.postCalls("register/".concat(s,"/").concat(r),{data:u});case 5:j=t.sent,console.log(j),201==j.status?(k.b.success("Password Updated"),i("/")):k.b.error("! Token Expired generate new LInk"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0),e.current&&(l({success:!1}),o({submit:t.t0.message}),d(!1));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,s){return t.apply(this,arguments)}}(),children:function(e){var t=e.errors,s=e.handleBlur,r=e.handleChange,a=e.handleSubmit,n=e.isSubmitting,c=(e.setFieldValue,e.touched),o=e.values;return Object(P.jsxs)("form",{noValidate:!0,onSubmit:a,children:[Object(P.jsx)(w.a,{error:Boolean(c.password&&t.password),fullWidth:!0,helperText:c.password&&t.password,label:"Password",margin:"normal",name:"password",onBlur:s,onChange:r,type:"password",value:o.password,variant:"outlined"}),Object(P.jsx)(w.a,{error:Boolean(c.passwordConfirm&&t.passwordConfirm),fullWidth:!0,helperText:c.passwordConfirm&&t.passwordConfirm,label:"Password Confirmation",margin:"normal",name:"passwordConfirm",onBlur:s,onChange:r,type:"password",value:o.passwordConfirm,variant:"outlined"}),t.submit&&Object(P.jsx)(d.a,{sx:{mt:3},children:Object(P.jsx)(g.a,{error:!0,children:t.submit})}),Object(P.jsx)(d.a,{sx:{mt:3},children:Object(P.jsx)(v.a,{color:"primary",disabled:n,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Send"})})]})}})},T=s(52),B=s(134),E={Amplify:"/static/icons/amplify.svg",Auth0:"/static/icons/auth0.svg",Firebase:"/static/icons/firebase.svg",JWT:"/static/icons/jwt.svg"};t.default=function(){var e=Object(o.i)(),t=e.id,s=e.token,r=Object(y.a)().platform,f=Object(o.h)(),O=function(){var e=Object(n.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/register/reset-password/".concat(t,"/").concat(s),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:201==e.sent.status?console.log("user valid"):f("*");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){B.a.push({event:"page_view"})}),[]),Object(c.useEffect)((function(){O()}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(l.a,{children:Object(P.jsx)("title",{children:"Password Reset | Material Kit Pro"})}),Object(P.jsxs)(d.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",minHeight:"100vh"},children:[Object(P.jsx)(x.a,{}),Object(P.jsxs)(u.a,{maxWidth:"sm",sx:{py:10},children:[Object(P.jsx)(d.a,{sx:{display:"flex",justifyContent:"center"},children:Object(P.jsx)(i.b,{to:"/",children:Object(P.jsx)(T.a,{sx:{height:40,width:40}})})}),Object(P.jsx)(d.a,{sx:{display:"flex",justifyContent:"center",mb:8}}),Object(P.jsx)(j.a,{children:Object(P.jsxs)(b.a,{sx:{display:"flex",flexDirection:"column",p:4},children:[Object(P.jsxs)(d.a,{sx:{alignItems:"center",display:"flex",justifyContent:"space-between",mb:3},children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(h.a,{color:"textPrimary",gutterBottom:!0,variant:"h4",children:"Password Reset"}),Object(P.jsx)(h.a,{color:"textSecondary",variant:"body2",children:"Reset your account password using your code"})]}),Object(P.jsx)(d.a,{sx:{height:32,"& > img":{maxHeight:"100%",width:"auto"}},children:Object(P.jsx)("img",{alt:"Auth platform",src:E[r]})})]}),Object(P.jsx)(d.a,{sx:{flexGrow:1,mt:3},children:"JWT"===r&&Object(P.jsx)(R,{})}),Object(P.jsx)(p.a,{sx:{my:3}}),"Amplify"===r&&Object(P.jsx)(m.a,{color:"textSecondary",component:i.b,to:"/authentication/password-recovery",variant:"body2",children:"Did you not receive the code?"})]})})]})]})]})}}}]);
//# sourceMappingURL=111.5281f177.chunk.js.map